{% extends "_base_layout.html" %}
{% block title %}Disk Usage Chart{% endblock %}
{% block head %}
    {{ super() }}

    <!-- Override the javascript code needed for charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

{% endblock %}

{% block content %}
<center>
    <br/>

    <br/>
    <h5>{{ line_chart_title }}</h5>

    <canvas id="diskLineChart" width="1300" height="620"></canvas>

    <script>

        {# First: go trough all charts to create the data containers #}

        {% for disk_chart in chart_manager.disk_charts.values() -%}
            var = {{ disk_chart.data_placeholder }} = [
                {% for data in disk_chart.dataset_data -%}
                    {{ data }},
                {% endfor %}
            ];
        {% endfor %}

        var diskLineChartData = {
            labels: [
            {% for chart_label in chart_manager.chart_labels -%}
                '{{ chart_label }}',
            {% endfor %}
            ],
            datasets: [
            {% for disk_chart in chart_manager.disk_charts.values() -%}
                {
                {% for k, v in disk_chart.dataset.definition.items() -%}
                    {%- if v.is_quoted -%}
                        {{ k }}: '{{ v }}',
                    {% else -%}
                        {{ k }}: {{ v }},
                    {% endif %}
                {% endfor %}
                },
            {% endfor %}
            ]
        }
    </script>

    <br/>
    <h5>{{ disk_usage_title }}</h5>

    <script src="{{url_for('static', filename='js/TEST_disk_chart.js')}}" ></script>

    <p><a href="{{ url_for('download_file') }}">[Download-File]</a></p>
</center>
{% endblock %}